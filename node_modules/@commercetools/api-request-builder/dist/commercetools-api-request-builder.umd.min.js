!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.CommercetoolsApiRequestBuilder={})}(this,function(e){"use strict";var r="query",t="queryOne",n="queryExpand",s="queryLocation",i="search",o="projection",a="suggest",u=Object.freeze({query:r,queryOne:t,queryExpand:n,queryLocation:s,search:i,projection:o,suggest:a}),c={cartDiscounts:{type:"cart-discounts",endpoint:"/cart-discounts",features:[r,t,n]},carts:{type:"carts",endpoint:"/carts",features:[r,t,n]},categories:{type:"categories",endpoint:"/categories",features:[r,t,n]},channels:{type:"channels",endpoint:"/channels",features:[r,t,n]},customerGroups:{type:"customer-groups",endpoint:"/customer-groups",features:[r,t,n]},customers:{type:"customers",endpoint:"/customers",features:[r,t,n]},customObjects:{type:"custom-objects",endpoint:"/custom-objects",features:[r,t]},discountCodes:{type:"discount-codes",endpoint:"/discount-codes",features:[r,t,n]},extensions:{type:"extensions",endpoint:"/extensions",features:[r,t,n]},inventory:{type:"inventory",endpoint:"/inventory",features:[r,t,n]},messages:{type:"messages",endpoint:"/messages",features:[r,t,n]},myCarts:{type:"my-carts",endpoint:"/me/carts",features:[r,t,n]},myOrders:{type:"my-orders",endpoint:"/me/orders",features:[r,t,n]},orders:{type:"orders",endpoint:"/orders",features:[r,t,n]},orderImport:{type:"orderImport",endpoint:"/orders/import",features:[r]},payments:{type:"payments",endpoint:"/payments",features:[r,t,n]},productDiscounts:{type:"product-discounts",endpoint:"/product-discounts",features:[r,t,n]},productProjections:{type:"product-projections",endpoint:"/product-projections",features:[r,t,n,o]},productProjectionsSearch:{type:"product-projections-search",endpoint:"/product-projections/search",features:[i,t,n,o]},productProjectionsSuggest:{type:"product-projections-suggest",endpoint:"/product-projections/suggest",features:[i,a,t,o]},products:{type:"products",endpoint:"/products",features:[r,t,n]},productTypes:{type:"product-types",endpoint:"/product-types",features:[r,t,n]},project:{type:"project",endpoint:"/",features:[r]},reviews:{type:"reviews",endpoint:"/reviews",features:[r,t,n]},shippingMethods:{type:"shipping-methods",endpoint:"/shipping-methods",features:[r,t,n,s]},shoppingLists:{type:"shopping-lists",endpoint:"/shopping-lists",features:[r,t,n]},states:{type:"states",endpoint:"/states",features:[r,t,n]},subscriptions:{type:"subscriptions",endpoint:"/subscriptions",features:[r,t,n]},taxCategories:{type:"tax-categories",endpoint:"/tax-categories",features:[r,t,n]},types:{type:"types",endpoint:"/types",features:[r,t,n]},zones:{type:"zones",endpoint:"/zones",features:[r,t,n]}};var p=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)};function h(e){if("number"!=typeof e)throw new Error("A resource version is missing or invalid");return this.params.version=e,this}var f=Object.freeze({where:function(e){if(!e)throw new Error("Required argument for `where` is missing");var r=encodeURIComponent(e);return this.params.query.where.push(r),this},whereOperator:function(e){if(!e)throw new Error("Required argument for `whereOperator` is missing");if("and"!==e&&"or"!==e)throw new Error("Required argument for `whereOperator` is invalid, allowed values are (`and`, `or`)");return this.params.query.operator=e,this}});var y=Object.freeze({byId:function(e){if(!e)throw new Error("Required argument for `byId` is missing");if(this.params.key)throw new Error("A key for this resource has already been set. You cannot use both `byKey` and `byId`.");if(this.params.customerId)throw new Error("A customerId for this resource has already been set. You cannot use both `byId` and `byCustomerId`.");if(this.params.cartId)throw new Error("A cartId for this resource has already been set. You cannot use both `byId` and `byCartId`.");return this.params.id=e,this},byKey:function(e){if(!e)throw new Error("Required argument for `byKey` is missing");if(this.params.id)throw new Error("An ID for this resource has already been set. You cannot use both `byId` and `byKey`.");return this.params.key=e,this},byCustomerId:function(e){if(!e)throw new Error("Required argument for `byCustomerId` is missing");if(this.params.id)throw new Error("An ID for this resource has already been set. You cannot use both `byId` and `byCustomerId`.");return this.params.customerId=e,this},byCartId:function(e){if(!e)throw new Error("Required argument for `byCartId` is missing");if(this.params.id)throw new Error("An ID for this resource has already been set. You cannot use both `byId` and `byCartId`.");return this.params.cartId=e,this}});var d=Object.freeze({byCountry:function(e){if(!e)throw new Error("Required argument for `byCountry` is missing");return this.params.location.country=e,this},byCurrency:function(e){if(!e)throw new Error("Required argument for `byCurrency` is missing");if(!this.params.location.country)throw new Error("A `country` for this resource has not been set. You must set the country in order to use the `byCurrency` method.");return this.params.location.currency=e,this},byState:function(e){if(!e)throw new Error("Required argument for `byState` is missing");if(!this.params.location.country)throw new Error("A `country` for this resource has not been set. You must set the country in order to use the `byState` method.");return this.params.location.state=e,this}});var m=Object.freeze({expand:function(e){if(!e)throw new Error("Required argument for `expand` is missing");var r=encodeURIComponent(e);return this.params.expand.push(r),this}});var g=Object.freeze({sort:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error("Required argument for `sort` is missing");var t=encodeURIComponent(e+" "+(r?"asc":"desc"));return this.params.pagination.sort.push(t),this},page:function(e){if("number"!=typeof e&&!e)throw new Error("Required argument for `page` is missing or invalid");if("number"!=typeof e||e<1)throw new Error("Required argument for `page` must be a number >= 1");return this.params.pagination.page=e,this},perPage:function(e){if("number"!=typeof e&&!e)throw new Error("Required argument for `perPage` is missing or invalid");if("number"!=typeof e||e<0)throw new Error("Required argument for `perPage` must be a number >= 0");return this.params.pagination.perPage=e,this}});var l=Object.freeze({staged:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.params.staged=e,this},priceCurrency:function(e){return this.params.priceCurrency=e,this},priceCountry:function(e){return this.params.priceCountry=e,this},priceCustomerGroup:function(e){return this.params.priceCustomerGroup=e,this},priceChannel:function(e){return this.params.priceChannel=e,this}});var w=Object.freeze({searchKeywords:function(e,r){if(!e||!r)throw new Error("Required arguments for `searchKeywords` are missing");return this.params.searchKeywords.push({lang:r,value:encodeURIComponent(e)}),this}});var b=Object.freeze({text:function(e,r){if(!e||!r)throw new Error("Required arguments for `text` are missing");return this.params.search.text={lang:r,value:encodeURIComponent(e)},this},fuzzy:function(){return this.params.search.fuzzy=!0,this},fuzzyLevel:function(e){if(!e)throw new Error("Required argument for `fuzzyLevel` is missing");return this.params.search.fuzzyLevel=e,this},markMatchingVariants:function(){return this.params.search.markMatchingVariants=!0,this},facet:function(e){if(!e)throw new Error("Required argument for `facet` is missing");var r=encodeURIComponent(e);return this.params.search.facet.push(r),this},filter:function(e){if(!e)throw new Error("Required argument for `filter` is missing");var r=encodeURIComponent(e);return this.params.search.filter.push(r),this},filterByQuery:function(e){if(!e)throw new Error("Required argument for `filterByQuery` is missing");var r=encodeURIComponent(e);return this.params.search.filterByQuery.push(r),this},filterByFacets:function(e){if(!e)throw new Error("Required argument for `filterByFacets` is missing");var r=encodeURIComponent(e);return this.params.search.filterByFacets.push(r),this}}),v=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e},C=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},E=["type","endpoint","features"];function z(e){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)throw new Error("Cannot create a service without its definition.");if(E.forEach(function(r){if(!e[r])throw new Error("Definition is missing required parameter "+r+".")}),!Array.isArray(e.features)||!e.features.length)throw new Error("Definition requires `features` to be a non empty array.");if(!u)throw new Error("No project defined. Please enter a project key");var c=e.type,v=e.endpoint,z=e.features;return function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t={};return Object.keys(e).forEach(function(n){Object.defineProperty(t,n,{value:e[n],enumerable:!!r||"function"==typeof e[n]})}),t}(C({type:c,features:z,params:{id:null,expand:[],pagination:{page:null,perPage:null,sort:[]},location:{currency:"",country:"",state:""},query:{operator:"and",where:[]},searchKeywords:[]},withVersion:h},z.reduce(function(e,u){return u===r?C({},e,f,g):u===t?C({},e,y):u===s?C({},e,d):u===n?C({},e,m):u===i?C({},e,b,g,{params:{expand:[],searchKeywords:[],staged:!0,pagination:{page:null,perPage:null,sort:[]},search:{facet:[],filter:[],filterByQuery:[],filterByFacets:[],fuzzy:!1,fuzzyLevel:0,markMatchingVariants:!1,text:null}}}):u===a?C({},e,b,g,w):u===o?C({},e,l):e},{}),{build:function(){var e,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withProjectKey:!0}).withProjectKey,c=function(e){if(!e)throw new Error("Missing options object to build query string.");var r=e.query,t=e.pagination,n=e.search,s=e.expand,i=e.staged,o=e.priceCurrency,a=e.priceCountry,u=e.priceCustomerGroup,c=e.priceChannel,p=e.searchKeywords,h=e.version,f=e.customerId,y=e.cartId,d=e.location,m=[];if(f&&m.push("customerId="+f),y&&m.push("cartId="+y),"boolean"==typeof i&&m.push("staged="+i.toString()),o&&m.push("priceCurrency="+o),a&&m.push("priceCountry="+a),u&&m.push("priceCustomerGroup="+u),c&&m.push("priceChannel="+c),s&&s.length&&(m=m.concat(s.map(function(e){return"expand="+e}))),r){var g=r.operator,l=r.where.join(encodeURIComponent(" "+g+" "));l&&m.push("where="+l)}if(d){var w=d.country,b=d.currency,v=d.state;w&&m.push("country="+w),b&&m.push("currency="+b),v&&m.push("state="+v)}if(t){var C=t.page,E=t.perPage,z=t.sort;if("number"==typeof E&&m.push("limit="+E),C){var I=(E||20)*(C-1);m.push("offset="+I)}z&&z.length&&(m=m.concat(z.map(function(e){return"sort="+e})))}if(n){var j=n.text,q=n.fuzzy,x=n.fuzzyLevel,O=n.markMatchingVariants,R=n.facet,k=n.filter,P=n.filterByQuery,B=n.filterByFacets;j&&m.push("text."+j.lang+"="+j.value),q&&m.push("fuzzy=true"),x&&m.push("fuzzyLevel="+x),m.push("markMatchingVariants="+O.toString()),R.forEach(function(e){return m.push("facet="+e)}),k.forEach(function(e){return m.push("filter="+e)}),P.forEach(function(e){return m.push("filter.query="+e)}),B.forEach(function(e){return m.push("filter.facets="+e)})}return p&&p.forEach(function(e){return m.push("searchKeywords."+e.lang+"="+e.value)}),h&&m.push("version="+h),m.join("&")}(this.params),p=(n?"/"+u:"")+v+((e=this.params).id?"/"+e.id:e.key?"/key="+e.key:"")+(c?"?"+c:"");return function(){this.params.expand=[],-1!==this.features.indexOf(t)&&(this.params.id=null),-1!==this.features.indexOf(r)&&(this.params.pagination={page:null,perPage:null,sort:[]},this.params.query={operator:"and",where:[]}),-1!==this.features.indexOf(i)&&(this.params.staged=!0,this.params.pagination={page:null,perPage:null,sort:[]},this.params.search={facet:[],filter:[],filterByQuery:[],filterByFacets:[],fuzzy:!1,fuzzyLevel:0,markMatchingVariants:!1,text:null}),-1!==this.features.indexOf(s)&&(this.params.location={currency:"",country:"",state:""}),-1!==this.features.indexOf(o)&&(this.params.staged=!0),-1!==this.features.indexOf(a)&&(this.params.searchKeywords=[])}.call(this),p},parse:function(e){return function(e){var r=this,t=["expand","id","key","customerId","cartId","sort","page","perPage","staged","priceCurrency","priceCountry","priceCustomerGroup","priceChannel","text","fuzzy","fuzzyLevel","markMatchingVariants","facet","filter","filterByQuery","filterByFacets","searchKeywords","where","whereOperator","version","country","currency","state"];Object.keys(e).forEach(function(e){if(-1===t.indexOf(e))throw new Error('Unknown key "'+e+'"')}),e.expand&&e.expand.forEach(function(e){r.expand(e)}),p(e,"id")&&this.byId(e.id),p(e,"key")&&this.byKey(e.key),p(e,"customerId")&&this.byCustomerId(e.customerId),p(e,"cartId")&&this.byCartId(e.cartId),p(e,"country")&&this.byCountry(e.country),p(e,"currency")&&this.byCurrency(e.currency),p(e,"state")&&this.byState(e.state),e.sort&&e.sort.forEach(function(e){r.sort(e.by,"asc"===e.direction)}),p(e,"page")&&this.page(e.page),p(e,"perPage")&&this.perPage(e.perPage),p(e,"staged")&&this.staged(e.staged),p(e,"priceCurrency")&&this.priceCurrency(e.priceCurrency),p(e,"priceCountry")&&this.priceCountry(e.priceCountry),p(e,"priceCustomerGroup")&&this.priceCustomerGroup(e.priceCustomerGroup),p(e,"priceChannel")&&this.priceChannel(e.priceChannel),e.text&&this.text(e.text.value,e.text.language),e.fuzzy&&this.fuzzy(),p(e,"fuzzyLevel")&&this.fuzzyLevel(e.fuzzyLevel),e.markMatchingVariants&&this.markMatchingVariants(),e.facet&&e.facet.forEach(function(e){r.facet(e)}),e.filter&&e.filter.forEach(function(e){r.filter(e)}),e.filterByQuery&&e.filterByQuery.forEach(function(e){r.filterByQuery(e)}),e.filterByFacets&&e.filterByFacets.forEach(function(e){r.filterByFacets(e)}),e.searchKeywords&&e.searchKeywords.forEach(function(e){r.searchKeywords(e.value,e.language)}),e.where&&e.where.forEach(function(e){r.where(e)}),p(e,"whereOperator")&&this.whereOperator(e.whereOperator),p(e,"version")&&this.withVersion(e.version)}.call(this,e),this}}))}e.features=u,e.createRequestBuilder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=C({},c,e.customServices);return Object.keys(r).reduce(function(t,n){return C({},t,v({},n,z(r[n],e.projectKey)))},{})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=commercetools-api-request-builder.umd.min.js.map
